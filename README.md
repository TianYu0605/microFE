# 微前端探索

### 主题

从零实现微前端

软件设计原则与分层

### 单一职责原则

- 永远不该有多于一个原因来改变某个类

### 开放封闭原则

- 软件实体扩展应该是开放的，但对于修改应该是封闭的，可以扩展类，但尽量不要去修改

### 里氏替换原则

- 父类一定能够被自雷替换

### 最少知识原则

- 只与你最直接的对象交流，低耦合，高内聚，尽量减少依赖关系

### 依赖倒置原则

- 高层模块不应该依赖于低层模块，它们应该依赖于抽象，抽象不应该依赖于细节，细节应该依赖于抽象

### 日常开发过程中的架构质量

- 理解难度
- 崩溃率和错误率指标
- 接入依赖成本
- 开发效率
- 错误上报和信息收集功能

### 系统架构师

- 从系统的维度，负责整体系统的架构设计
- 比如关注负载、可靠性、伸缩、扩展、整体项目切分、缓存应用等方面的基础架构设计。

### 崩溃预防

- 对脏数据进行兜底和检验
- 自动化测试
- 单元测试
- 更广的灰度触达
- 崩溃报警
- 性能优化体系

### 微前端实现方式对比

#### 1. Iframe

优势

- 技术成熟
- 支持页面嵌入
- 天然支持运行沙箱隔离，独立运行

劣势

- 页面之间可以是不同的域名
- 需要对应的设计一套应用通讯机制，如何监听、传参格式等内容
- 应用加载、渲染、缓存等体系的实现

#### 2. web component

优势

- 支持自定义元素
- 支持 shadow dom，并可通过关联进行控制
- 支持模板 template 和插槽 slot，引入自定义组件内容

劣势

- 接入微前端需要重写当前项目
- 生态系统不完善，技术过新容易出现兼容性问题
- 整体交媾设计复杂，组件与组件之间拆分过细时，容易造成通信和控制繁琐

#### 3. 使用自研框架

优势

- 高度定制化，满足需要做兼容的一切场景
- 独立的通信机制和沙箱运行环境，可解决应用之间相互影响的问题
- 支持不同技术栈的子应用，可无缝实现页面无刷新渲染

劣势

- 技术实现难度高
- 需要设计一套定制的通信机制
- 首次加载会出现资源过大的情况
